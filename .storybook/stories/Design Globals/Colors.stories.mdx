import { Meta, ColorPalette, ColorItem } from "@storybook/addon-docs"

import resolveConfig from "tailwindcss/resolveConfig"
import tailwindConfig from "tailwind.config.js"

<Meta title="Colors" />

# Colors

<ColorPalette>
  {Object.entries(resolveConfig(tailwindConfig).theme.colors).map(([k, v]) => {
    if (typeof v === "string" && v.match(/^#/)) {
      return <ColorItem key={k} title={k.toUpperCase()} colors={{ [k]: v }} />
    }
    if (typeof v === "object") {
      let customColors = Object.fromEntries(Object.entries(v).filter(([key]) => !key.match(/[\d]{2,}/)))
      if (Object.keys(customColors).length > 0) {
        return <ColorItem key={k} title={k.toUpperCase()} colors={customColors} />
      }
    }
    return null
  })}
</ColorPalette>
